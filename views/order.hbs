<style>
        .form-group {
            width: 960px;
            margin: 50px auto;
            font-size: 15px;
            border-radius: 2px;
        }
        .form-group form {
            margin-bottom: 15px;
            background: #f7f7f7;
            box-shadow: 0px 2px 2px rgba(0, 0, 0, 0.3);
            padding: 30px;
        }
        .form-group h2 {
            margin: 0 0 15px;
        }
        .form-control, .btn {
            min-height: 38px;
            border-radius: 2px;
        }
        h3{
            color: rgb(25, 148, 214)
        }
        .select{
            width: 100%;
            min-height: 38px;
            border-radius: 2px;
        }
        .btn-continue{
            width: 200px;
            margin-left: 510px;
            font-size: 30px;
            background-color: #1e90ff ;
            border-radius: 1px;
            border-color: white;
        }
        .white{
            margin-top: 10px;
            margin-bottom: 10px;
            color:white;
            text-align: center;
        }
    </style>
<form>
    <div class="form-group">
            <h3>THÔNG TIN NGƯỜI TIÊM</h3>
            <div class="row">
                <div class="col-4">
                    <h5>Họ và Tên</h5>
                </div>
                <div class="col-8">
                    <h5>Mối quan hệ</h5>
                    <p>Khách hàng chỉ được đăng ký tiêm cho người thân nếu thuộc các mối quan hệ sau</p>
                </div>
            </div>
            <div class="row">
                <div class="col-4">
                    <input type="text" class="form-control" name="name" id="name" placeholder="Your Name" required>
                </div>
                <div class="col-4">
                    <select class="select">                           
                        <option value="01">Cha</option>
                        <option value="02">Mẹ</option>
                        <option value="03">Ông</option>
                        <option value="04">Bà</option>
                        <option value="04">Anh</option>
                        <option value="04">Chị</option>
                        <option value="04">Em</option>
                    </select>
                </div>
            </div>
            <div class="row">
                <div class="col-4">
                <h5>Ngày Sinh</h5>
                <input type="date" class="form-control" name="DOB" id="DOB" required>
                </div>
                <div class="col-4">
                <h5>Giới Tính</h5>
                <input type="radio" name="gender" value="Nam" checked> Nam<br>
                <input type="radio" name="gender" value="Nu"> Nữ<br>
                </div>
            </div>
            <div class="row">
                <div class="col-4">
                <h5>Số Điện Thoại</h5>
                <input type="phone" class="form-control" name="phone" id="phone" placeholder="Your Phone" required>
                </div>
                <div class="col-4">
                    <h5>Email</h5>
                    <input type="email" class="form-control" name="email" id="email" placeholder="Your Email" required>
                </div>
            </div>
            <div class="row">
                <div class="col-8">
                    <h5>Số nhà - Tên Đường</h5>
                    <input type="text" class="form-control" name="address" id="address" placeholder="Your address" required>
                </div> 
            </div>    
            <div class="row">
                <div class="col-4">
                    <h5>Tỉnh/Thành Phố</h5>
                    <select class="select">                           
                        <option value="01">Thành phố Hà Nội</option>

                        <option value="02">Hà Giang</option>

                        <option value="04">Cao Bằng</option>

                        <option value="06">Bắc Kạn</option>

                        <option value="08">Tuyên Quang</option>

                        <option value="10">Lào Cai</option>

                        <option value="11">Điện Biên</option>

                        <option value="12">Lai Châu</option>

                        <option value="14">Sơn La</option>

                        <option value="15">Yên Bái</option>

                        <option value="17">Hoà Bình</option>

                        <option value="19">Thái Nguyên</option>

                        <option value="20">Lạng Sơn</option>

                        <option value="22">Quảng Ninh</option>

                        <option value="24">Bắc Giang</option>

                        <option value="25">Phú Thọ</option>

                        <option value="26">Vĩnh Phúc</option>

                        <option value="27">Bắc Ninh</option>

                        <option value="30">Hải Dương</option>

                        <option value="31">Thành phố Hải Phòng</option>

                        <option value="33">Hưng Yên</option>

                        <option value="34">Thái Bình</option>

                        <option value="35">Hà Nam</option>

                        <option value="36">Nam Định</option>

                        <option value="37">Ninh Bình</option>

                        <option value="38">Thanh Hóa</option>

                        <option value="40">Nghệ An</option>

                        <option value="42">Hà Tĩnh</option>

                        <option value="44">Quảng Bình</option>

                        <option value="45">Quảng Trị</option>

                        <option value="46">Thừa Thiên Huế</option>

                        <option value="48">Thành phố Đà Nẵng</option>

                        <option value="49">Quảng Nam</option>

                        <option value="51">Quảng Ngãi</option>

                        <option value="52">Bình Định</option>

                        <option value="54">Phú Yên</option>

                        <option value="56">Khánh Hòa</option>

                        <option value="58">Ninh Thuận</option>

                        <option value="60">Bình Thuận</option>

                        <option value="62">Kon Tum</option>

                        <option value="64">Gia Lai</option>

                        <option value="66">Đắk Lắk</option>

                        <option value="67">Đắk Nông</option>

                        <option value="68">Lâm Đồng</option>

                        <option value="70">Bình Phước</option>

                        <option value="72">Tây Ninh</option>

                        <option value="74">Bình Dương</option>

                        <option value="75">Đồng Nai</option>

                        <option value="77">Bà Rịa - Vũng Tàu</option>

                        <option value="79">Thành phố Hồ Chí Minh</option>

                        <option value="80">Long An</option>

                        <option value="82">Tiền Giang</option>

                        <option value="83">Bến Tre</option>

                        <option value="84">Trà Vinh</option>

                        <option value="86">Vĩnh Long</option>

                        <option value="87">Đồng Tháp</option>

                        <option value="89">An Giang</option>

                        <option value="91">Kiên Giang</option>

                        <option value="92">Thành phố Cần Thơ</option>

                        <option value="93">Hậu Giang</option>

                        <option value="94">Sóc Trăng</option>

                        <option value="95">Bạc Liêu</option>
                                                    
                        <option value="96">Cà Mau</option>
                    </select>
                </div>
                <div class="col-4">
                    <h5>Quận/Huyện</h5>
                    <input type="text" class="form-control" name="district" id="district" placeholder="Your district" required>
                </div>
                <div class="col-4">
                    <h5>Phường/Xã</h5>
                    <input type="text" class="form-control" name="wards" id="wards" placeholder="Your wards" required>
                </div>          
            </div>
    </div>
    <div class="form-group">
        <h3>CHỌN ĐỊA ĐIỂM MONG MUỐN TIÊM</h3>
        <div class="row">
            <div class="col-md-4">
                <label for="inputNameFamily">Trung tâm VNVC mong muốn tiêm (*)</label>
                <select class="select" id="branch">
                    <option>Chọn cơ sở</option>
                    {{#each branchs}}
                    <option value="{{this._id}}">{{this.name}}</option>
                    {{/each}}
                </select>
            </div>
        </div><br />
        <div class="row">
            <div class="col-md-6">
                <label for="inputBirtDay">Ngày mong muốn tiêm (*)</label>
                <input type="datetime-local" class="form-control" id="birtd">
            </div>
        </div><br />
    </div>
    <div class="form-group">
    <h3>CHỌN THÊM LOẠI VẮC XIN</h3>
            <div class="row">
                <div class="col-md-12">
                    <div class="form-group">
                        <label for="inputAddress">Loại vắc xin muốn đăng ký (*)</label>
                        <div class="custom-control custom-radio">
                            <input type="radio" class="custom-control-input" id="0" value="0" name="radio-stacked" onclick="handleClick(this);">
                            <label class="custom-control-label" for="customControlValidation2">Vắc xin gói</label>
                        </div>
                        <div class="custom-control custom-radio mb-3">
                            <input type="radio" class="custom-control-input" id="1" value="1" name="radio-stacked" onclick="handleClick(this);">
                            <label class="custom-control-label" for="customControlValidation3">Vắc xin lẻ</label>
                        </div>
                    </div>
                </div>
            </div>
            <div id="vaccineListGroup" style="display: none;">
            </div>
            <div id="vaccineListSingle" style="display: none;">
            </div> <br />   
            <button type="submit" class="btn btn-success">Hoàn thành đăng ký</button>
        </div>
</form>
<script>
    let cityCode = 1
    function choosedCity() {
        let idCity =  document.getElementById("citySelect").value;
        fetch('https://provinces.open-api.vn/api/d/')
            .then(response => response.json())
            .then(data => {
                let districts = data.filter(item => item.province_code == idCity)
                let districtsHTML = ""
                for (let district of districts) {
                    districtsHTML += `<option value="${district.code}">${district.name}</option>`
                }
                document.getElementById("district").innerHTML = districtsHTML
            });
        
    }

    function choosedDistrict() {
        let idDistrict =  document.getElementById("district").value;
        fetch('https://provinces.open-api.vn/api/w/')
            .then(response => response.json())
            .then(data => {
                let wards = data.filter(item => item.district_code == idDistrict)
                let wardsHTML = ""
                for (let ward of wards) {
                    wardsHTML += `<option value="${ward.code}">${ward.name}</option>`
                }
                document.getElementById("ward").innerHTML = wardsHTML
            });
    }

    function handleClick(event) {
        if(event.value === "0"){
            document.getElementById('vaccineListGroup').style.display = "block"
            document.getElementById('vaccineListSingle').style.display = "none"
            fetch('http://localhost:3000/category/listAndVaccineListIsGroup')
            .then(response => response.json())
            .then(data => {
                let groupHTML = ""
                for (let category of data) {
                    let title = `
                    <div class="row" ><b>${category.name}</b></div>
                    <div class="row"> `
                    let content = ""
                    for (let vaccine of category.vacciniesList){
                        content += `
                            <div class="col-md-4" style="border-style: ridge;">
                                <input type="checkbox"/>
                                <div>${vaccine.name} - ${vaccine.price} VND</div>
                            </div>
                        `
                    }
                    let footer = `</div>`
                    let HTML = title + content + footer
                    groupHTML += HTML
                }
                document.getElementById("vaccineListGroup").innerHTML = groupHTML
            });
        }else{
            document.getElementById('vaccineListSingle').style.display = "block"
            document.getElementById('vaccineListGroup').style.display = "none"
            fetch('http://localhost:3000/vaccine/getByType/1')
            .then(response => response.json())
            .then(data => {
                let groupHTML = `<div class="row">`
                for (let vaccine of data) {
                    groupHTML += `
                            <div class="col-md-4" style="border-style: ridge;">
                                <input type="checkbox"/>
                                <div>${vaccine.name} - ${vaccine.price} VND</div>
                            </div>
                    `
                }
                groupHTML += `</div>`
                    document.getElementById("vaccineListSingle").innerHTML = groupHTML
            });
        
        }
    }

</script>